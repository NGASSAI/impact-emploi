ğŸ“‹ GUIDE DE MISE EN PRODUCTION
================================

DATE: 21 fÃ©vrier 2026
STATUS: âœ… TOUS LES CHANGEMENTS TESTÃ‰S LOCALEMENT

FICHIERS Ã€ UPLOADER VIA FTP
============================

NOUVEAUX FICHIERS (3):
âœ¨ admin_activities.php
âœ¨ admin_visitors.php  
âœ¨ setup_visitors_table.php

FICHIERS MODIFIÃ‰S (7):
ğŸ“ config.php
ğŸ“ admin_dashboard.php
ğŸ“ profil.php
ğŸ“ includes/header.php
ğŸ“ index.php
ğŸ“ job_detail.php
ğŸ“ recruteur_dashboard.php


Ã‰TAPES DE MISE EN PRODUCTION
=============================

1ï¸âƒ£ UPLOADER LES FICHIERS (via FTP)
   - TÃ©lÃ©charger tous les fichiers listÃ©s ci-dessus
   - VÃ©rifier que le serveur exÃ©cute PHP 8.0+

2ï¸âƒ£ CRÃ‰ER LA TABLE VISITORS (une seule fois)
   - Via navigateur: https://impactemploi.gt.tc/setup_visitors_table.php
   - Ou via phpMyAdmin si disponible

3ï¸âƒ£ TESTER LES NOUVELLES PAGES (Ãªtre connectÃ© en admin)
   - https://impactemploi.gt.tc/admin_activities.php
   - https://impactemploi.gt.tc/admin_visitors.php
   - https://impactemploi.gt.tc/admin_dashboard.php (vÃ©rifier les nouvelles cartes)

4ï¸âƒ£ TESTER LES CHANGEMENTS
   - Homepage: https://impactemploi.gt.tc/ (images doivent charger progressivement)
   - Profil: https://impactemploi.gt.tc/profil.php (bio sans double-Ã©chappement)
   - DÃ©tail emploi: https://impactemploi.gt.tc/job_detail.php (lazy loading)

5ï¸âƒ£ VIDER LE CACHE NAVIGATEUR
   - Ctrl+Shift+R (Windows, Chrome)
   - Cmd+Shift+R (Mac)
   - Supprimer cookies si problÃ¨me de session


RÃ‰SUMÃ‰ DES CHANGEMENTS
=======================

config.php:
  âœ“ function sanitize() - Ã©vite le double-Ã©chappement HTML
  âœ“ function track_visitor() - enregistre les visiteurs

admin_activities.php (NOUVEAU):
  âœ“ Pagination: 30 activitÃ©s par page
  âœ“ Recherche par action/description
  âœ“ Affichage IP et user agent

admin_visitors.php (NOUVEAU):
  âœ“ Filtrage par date
  âœ“ Statistiques: total, IPs uniques, visiteurs inscrits
  âœ“ Tableau complet des visiteurs

admin_dashboard.php:
  âœ“ Liens vers pages activitÃ©s et visiteurs
  âœ“ Nouvelles cartes statistiques visiteurs

profil.php:
  âœ“ Bio stockÃ©e avec sanitize() au lieu de clean()
  âœ“ Pas de double-Ã©chappement des caractÃ¨res spÃ©ciaux

includes/header.php:
  âœ“ Affiche default.png si avatar supprimÃ©

index.php, job_detail.php, profil.php, edit_job.php, recruteur_dashboard.php:
  âœ“ Lazy loading="lazy" sur les images
  âœ“ track_visitor() sur chaque chargement de page


POINTS IMPORTANTS
=================

âš ï¸ La table 'visitors' doit Ãªtre crÃ©Ã©e une seule fois
âš ï¸ Ne pas supprimer setup_visitors_table.php - utile pour dÃ©pannage
âš ï¸ Les visiteurs non authentifiÃ©s sont aussi trackÃ©s (user_id = NULL)
âš ï¸ Le lazy loading n'affecte pas les lightbox (data-lightbox)


ROLLBACK EN CAS DE PROBLÃˆME
============================

Si un changement casse le site:

1. TÃ©lÃ©charger l'ancienne version du fichier depuis le backup
2. Supprimer les fichiers NOUVEAUX si causent erreur:
   - admin_activities.php
   - admin_visitors.php
   - setup_visitors_table.php
3. Revert config.php si les fonctions causent erreur

EN CAS DE DOUTE:
Activer le mode debug dans config.php:
define('DEBUG_MODE', true);

